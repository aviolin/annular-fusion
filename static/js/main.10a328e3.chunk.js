(this["webpackJsonpannular-fusion"]=this["webpackJsonpannular-fusion"]||[]).push([[0],{70:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var c=n(1),i=n.n(c),o=n(32),r=n.n(o),a=n(7),s=n(0),l=function(e){return Object(s.jsxs)("div",{className:"admin",children:[Object(s.jsxs)("label",{children:[Object(s.jsx)("input",{name:"client-control",type:"checkbox",checked:e.control,onChange:e.controlHandler}),"\xa0Control all clients?"]}),Object(s.jsx)("p",{children:e.connection})]})};var d=function(e){return Object(s.jsx)("button",{onClick:e.onClick,id:e.id,children:e.text})};var u=function(e){var t=!0===e.control?" All":"";return Object(s.jsx)("div",{className:!0===e.control?"controls all":"controls",children:Object(s.jsx)(d,{text:e.isPlaying?"Stop"+t:"Start"+t,onClick:e.btnHandler,id:"local"})})},j=[{cycle:0,duration:10,id:0,section:"Countdown"},{cycle:1,duration:30,id:1,section:"Ascent"},{cycle:1,duration:20,id:2,section:"Soaring"},{cycle:1,duration:30,id:3,section:"Descent"},{cycle:1,duration:20,id:4,section:"Lament"},{cycle:2,duration:20,id:5,section:"Ascent"},{cycle:2,duration:15,id:6,section:"Soaring"},{cycle:2,duration:20,id:7,section:"Descent"},{cycle:2,duration:15,id:8,section:"Lament"},{cycle:3,duration:10,id:9,section:"Ascent"},{cycle:3,duration:5,id:10,section:"Soaring"},{cycle:3,duration:10,id:11,section:"Descent"},{cycle:3,duration:5,id:12,section:"Lament"},{cycle:4,duration:5,id:13,section:"Ascent"},{cycle:4,duration:2,id:14,section:"Soaring"},{cycle:4,duration:5,id:15,section:"Descent"},{cycle:4,duration:2,id:16,section:"Lament"},{cycle:5,duration:3,id:17,section:"Ascent"},{cycle:5,duration:1,id:18,section:"Soaring"},{cycle:6,duration:2,id:19,section:"*Ascent*"}];var b=function(e){return Object(s.jsx)("div",{className:"progress_container",children:Object(s.jsx)("div",{id:"progress-bar",className:"progress",style:{width:100*e.percent+"%"}})})};var O=function(e){var t,n,c,i,o,r;return Object(s.jsxs)("div",{className:"countdown",children:[e.isSolo?Object(s.jsx)("p",{className:"red",children:"SOLO MODE: Uncheck box at bottom for the performance."}):null,Object(s.jsxs)("p",{className:"section_title",children:[null===(t=j[e.curSection])||void 0===t?void 0:t.section,"\xa0",null===(n=j[e.curSection])||void 0===n?void 0:n.cycle,"\xa0 (",null===(c=j[e.curSection])||void 0===c?void 0:c.duration,'")']}),Object(s.jsxs)("p",{className:"timer",children:[Math.trunc(10*e.timer)/10," seconds"]}),Object(s.jsx)(b,{percent:e.percent}),Object(s.jsxs)("p",{className:"section_next",children:["Next: ",Object(s.jsxs)("b",{children:[null===(i=j[e.curSection+1])||void 0===i?void 0:i.section,"\xa0",null===(o=j[e.curSection+1])||void 0===o?void 0:o.cycle,"\xa0 (",null===(r=j[e.curSection+1])||void 0===r?void 0:r.duration,'")']})]})]})},v=function(e){var t=j.map((function(t){var n="btn-link ";return e.curSection===t.id&&(n+="current"),e.curSection>t.id&&(n+="completed"),Object(s.jsx)("li",{children:Object(s.jsxs)("button",{className:n,onClick:e.btnHandler,"data-id":t.id,children:[t.section,"\xa0",t.cycle,"\xa0 (",t.duration,'")']})},t.id)}));return Object(s.jsx)("div",{className:"section_list",children:Object(s.jsx)("ol",{children:t})})},f=n(33),m=n.n(f)()("https://pacific-beyond-27860.herokuapp.com/");n(70);var S=function(){var e=Object(c.useState)(!1),t=Object(a.a)(e,2),n=t[0],i=t[1],o=Object(c.useState)(j[0].duration),r=Object(a.a)(o,2),d=r[0],b=r[1],f=Object(c.useState)(0),S=Object(a.a)(f,2),h=S[0],x=S[1],y=Object(c.useState)(0),p=Object(a.a)(y,2),g=p[0],k=p[1],N=Object(c.useState)(new Date),w=Object(a.a)(N,2),D=w[0],A=w[1],C=Object(c.useState)(!1),H=Object(a.a)(C,2),L=H[0],E=H[1],_=Object(c.useState)("Not connected to server."),I=Object(a.a)(_,2),M=I[0],P=I[1],J=Object(c.useState)(!1),R=Object(a.a)(J,2),T=R[0],B=R[1],F=(Object(c.useRef)(),Object(c.useRef)(),Object(c.useState)(0)),U=Object(a.a)(F,2);function q(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t&&T||(b(j[e].duration),x(0),k(e),A(new Date),i(!0))}function z(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&T||(b(j[0].duration),x(0),k(0),A(new Date),i(!1))}function G(e){if("checkbox"!==e.target.type){var t=0;if(e.target.classList.contains("btn-link"))return t=+e.target.dataset.id,L?void m.emit("Start",t):void q(t);L?n?m.emit("Stop"):m.emit("Start",t):n?i(!1):q(t)}else"client-control"===e.target.name?E(!L):"solo-control"===e.target.name&&B(!T)}function K(){if(!n||g>=j.length)z();else{var e=new Date-D,t=j[g].duration-e/1e3;if(t<=0){k(g+1);var c=D;c.setTime(c.getTime()+1e3*j[g].duration),A(c),t+=j[g].duration}x(e/(1e3*j[g].duration)),b(t)}}return U[0],U[1],Object(c.useEffect)((function(){m.on("Hello",(function(e){return P(e+" client(s) connected to server :)")})),m.on("Start",(function(e){return q(e,!0)})),m.on("Stop",(function(){return z(!0)}))}),[]),Object(c.useEffect)((function(){var e=setInterval(K,33);return function(){clearInterval(e)}})),Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(O,{isPlaying:n,isSolo:T,curSection:g,timer:d,percent:h}),Object(s.jsx)(u,{isPlaying:n,btnHandler:G,control:L}),Object(s.jsx)(v,{btnHandler:G,curSection:g}),Object(s.jsx)(l,{control:L,solo:T,controlHandler:G,connection:M})]})};r.a.render(Object(s.jsx)(i.a.StrictMode,{children:Object(s.jsx)(S,{})}),document.getElementById("root"))}},[[71,1,2]]]);
//# sourceMappingURL=main.10a328e3.chunk.js.map