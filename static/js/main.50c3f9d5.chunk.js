(this["webpackJsonpannular-fusion"]=this["webpackJsonpannular-fusion"]||[]).push([[0],{79:function(e,t,c){},80:function(e,t,c){},81:function(e,t,c){"use strict";c.r(t);var n=c(2),i=c.n(n),s=c(38),o=c.n(s),a=c(5),r=c(3),l=c(4),d=c(0),j=function(e){var t=Object(n.useState)(!1),c=Object(a.a)(t,2),i=c[0],s=c[1];return Object(d.jsxs)("div",{className:"admin",children:[Object(d.jsx)("header",{children:Object(d.jsxs)("button",{className:"admin-toggle-btn",onClick:function(){return s((function(e){return!e}))},children:[Object(d.jsx)("span",{children:"Admin"}),i?Object(d.jsx)(r.a,{icon:l.b}):Object(d.jsx)(r.a,{icon:l.a})]})}),i&&Object(d.jsxs)("div",{children:[Object(d.jsxs)("label",{children:[Object(d.jsx)("input",{name:"client-control",type:"checkbox",checked:e.control,onChange:e.controlHandler}),"Control all clients?"]}),Object(d.jsx)("p",{className:"clients",children:e.connection}),Object(d.jsxs)("p",{className:"what",children:[Object(d.jsx)(r.a,{icon:l.e,className:"icon"}),"What is this?"]}),Object(d.jsx)("p",{children:'Each musician should open this webpage on a device. One musician will check the box above, and when they hit "Start", each user\'s timer will begin synchronously*. You can test this by opening the app in multiple windows or on multiple devices.'}),Object(d.jsx)("p",{className:"footnote",children:"* Within some milliseconds. The delay ultimately depends on your internet connection."})]})]})};var u=function(e){var t=!0===e.control?" All":"",c=Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(r.a,{icon:l.d,className:"icon"}),"\xa0\xa0\xa0Start ",t]}),n=Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(r.a,{icon:l.c,className:"icon"}),"\xa0\xa0\xa0Stop ",t]});return Object(d.jsx)("div",{className:!0===e.control?"controls all":"controls",children:Object(d.jsx)("button",{onClick:e.btnHandler,id:"local",children:e.isPlaying?n:c})})},b=[{cycle:0,duration:10,id:0,section:"Countdown"},{cycle:1,duration:30,id:1,section:"Ascent"},{cycle:1,duration:20,id:2,section:"Soaring"},{cycle:1,duration:30,id:3,section:"Descent"},{cycle:1,duration:20,id:4,section:"Lament"},{cycle:2,duration:20,id:5,section:"Ascent"},{cycle:2,duration:15,id:6,section:"Soaring"},{cycle:2,duration:20,id:7,section:"Descent"},{cycle:2,duration:15,id:8,section:"Lament"},{cycle:3,duration:10,id:9,section:"Ascent"},{cycle:3,duration:5,id:10,section:"Soaring"},{cycle:3,duration:10,id:11,section:"Descent"},{cycle:3,duration:5,id:12,section:"Lament"},{cycle:4,duration:5,id:13,section:"Ascent"},{cycle:4,duration:2,id:14,section:"Soaring"},{cycle:4,duration:5,id:15,section:"Descent"},{cycle:4,duration:2,id:16,section:"Lament"},{cycle:5,duration:3,id:17,section:"Ascent"},{cycle:5,duration:1,id:18,section:"Soaring"},{cycle:6,duration:2,id:19,section:"*Ascent*"}];var h=function(e){return Object(d.jsx)("div",{className:"progress_container",children:Object(d.jsx)("div",{id:"progress-bar",className:"progress",style:{width:100*e.percent+"%"}})})};var O=function(e){var t,c,n,i,s,o;return Object(d.jsxs)("div",{className:"countdown",children:[Object(d.jsx)("p",{className:"timer",children:b[e.curSection]?Object(d.jsxs)(d.Fragment,{children:[Math.trunc(10*e.timer)/10," seconds"]}):Object(d.jsx)(d.Fragment,{children:"\xa0"})}),Object(d.jsx)(h,{percent:e.percent}),Object(d.jsx)("p",{className:"section-title",children:b[e.curSection]&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("span",{className:"light",children:"Now:"})," ",Object(d.jsxs)("b",{children:[null===(t=b[e.curSection])||void 0===t?void 0:t.section,"\xa0",null===(c=b[e.curSection])||void 0===c?void 0:c.cycle,"\xa0 (",null===(n=b[e.curSection])||void 0===n?void 0:n.duration,'")']})]})}),Object(d.jsx)("p",{className:"section-next",children:b[e.curSection+1]&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("span",{className:"light",children:"Next:"})," ",Object(d.jsxs)("b",{children:[null===(i=b[e.curSection+1])||void 0===i?void 0:i.section,"\xa0",null===(s=b[e.curSection+1])||void 0===s?void 0:s.cycle,"\xa0 (",null===(o=b[e.curSection+1])||void 0===o?void 0:o.duration,'")']})]})})]})},m=c(39),x=function(){return Object(d.jsxs)("footer",{children:[Object(d.jsx)("div",{className:"links",children:Object(d.jsxs)("a",{href:"https://github.com/aviolin/annular-fusion",target:"_blank",rel:"noreferrer",children:[Object(d.jsx)(r.a,{icon:m.a,className:"icon"}),"View the source on Github"]})}),Object(d.jsx)("p",{className:"copyright",children:"\xa9 Arlo Adams, 2021"})]})},v=function(){return Object(d.jsxs)("header",{className:"nav",children:[Object(d.jsxs)("div",{className:"logo",children:[Object(d.jsx)(r.a,{icon:l.g,className:"icon"}),"Synch Timer"]}),Object(d.jsx)("div",{})]})},p=function(e){var t=b.map((function(t){var c="list-btn ";return e.curSection===t.id&&(c+="current"),e.curSection>t.id&&(c+="completed"),Object(d.jsx)("li",{children:Object(d.jsxs)("button",{className:c,onClick:e.btnHandler,"data-id":t.id,children:[Object(d.jsxs)("div",{className:"no-pointer-events",children:[Object(d.jsx)("span",{className:"circle"}),t.section,"\xa0",t.cycle,"\xa0",Object(d.jsxs)("span",{className:"light",children:["(",t.duration,'")']})]}),e.curSection===t.id&&e.isPlaying?Object(d.jsx)(r.a,{icon:l.f,className:"no-pointer-events"}):Object(d.jsx)(r.a,{icon:l.d,className:"no-pointer-events"})]})},t.id)}));return Object(d.jsx)("div",{className:"section-list",children:Object(d.jsx)("ul",{children:t})})},g=c(40),y=c.n(g)()("https://pacific-beyond-27860.herokuapp.com/");c(79),c(80);var f=function(){var e=Object(n.useState)(!1),t=Object(a.a)(e,2),c=t[0],i=t[1],s=Object(n.useState)(b[0].duration),o=Object(a.a)(s,2),r=o[0],l=o[1],h=Object(n.useState)(0),m=Object(a.a)(h,2),g=m[0],f=m[1],S=Object(n.useState)(-1),N=Object(a.a)(S,2),w=N[0],k=N[1],A=Object(n.useState)(new Date),D=Object(a.a)(A,2),F=D[0],H=D[1],C=Object(n.useState)(!1),L=Object(a.a)(C,2),P=L[0],E=L[1],T=Object(n.useState)("Not connected to server."),I=Object(a.a)(T,2),J=I[0],M=I[1],W=Object(n.useState)(!1),_=Object(a.a)(W,2),B=_[0],G=_[1];function V(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t&&B||(l(b[e].duration),f(0),k(e),H(new Date),i(!0))}function Y(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&B||(l(b[0].duration),f(0),k(-1),H(new Date),i(!1))}function q(e){if("checkbox"!==e.target.type){var t=0;if(console.log("Here:",e.target),e.target.classList.contains("list-btn"))return t=+e.target.dataset.id,console.log("Clicking section:",+e.target.dataset.id),t===w&&c?P?void y.emit("Stop"):void i(!1):P?void y.emit("Start",t):void V(t);P?c?y.emit("Stop"):y.emit("Start",t):c?i(!1):V(t)}else"client-control"===e.target.name?E(!P):"solo-control"===e.target.name&&G(!B)}function z(){if(!c||w>=b.length)Y();else{var e=new Date-F,t=b[w].duration-e/1e3;if(t<=0){k(w+1);var n=F;n.setTime(n.getTime()+1e3*b[w].duration),H(n),t+=b[w].duration}f(e/(1e3*b[w].duration)),l(t)}}return Object(n.useEffect)((function(){y.on("Hello",(function(e){return M(e+" client(s) connected to server.")})),y.on("Start",(function(e){return V(e,!0)})),y.on("Stop",(function(){return Y(!0)}))}),[]),Object(n.useEffect)((function(){var e=setInterval(z,33);return function(){clearInterval(e)}})),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(v,{}),Object(d.jsx)("h1",{children:"Annular Fusion"}),Object(d.jsx)(O,{isPlaying:c,isSolo:B,curSection:w,timer:r,percent:g}),Object(d.jsx)(u,{isPlaying:c,btnHandler:q,control:P}),Object(d.jsx)(p,{btnHandler:q,curSection:w,isPlaying:c}),Object(d.jsx)(j,{control:P,solo:B,controlHandler:q,connection:J}),Object(d.jsx)(x,{})]})};o.a.render(Object(d.jsx)(i.a.StrictMode,{children:Object(d.jsx)(f,{})}),document.getElementById("root"))}},[[81,1,2]]]);
//# sourceMappingURL=main.50c3f9d5.chunk.js.map