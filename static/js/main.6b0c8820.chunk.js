(this["webpackJsonpannular-fusion"]=this["webpackJsonpannular-fusion"]||[]).push([[0],{70:function(t,e,n){},71:function(t,e,n){"use strict";n.r(e);var c=n(1),i=n.n(c),o=n(32),r=n.n(o),a=n(7),s=n(0),d=function(t){return Object(s.jsxs)("div",{className:"admin",children:[Object(s.jsxs)("label",{children:[Object(s.jsx)("input",{name:"client-control",type:"checkbox",checked:t.control,onChange:t.controlHandler}),"\xa0Control all clients?"]}),Object(s.jsx)("p",{children:t.connection})]})};var l=function(t){return Object(s.jsx)("button",{onClick:t.onClick,id:t.id,children:t.text})};var u=function(t){var e=!0===t.control?" All":"";return Object(s.jsx)("div",{className:!0===t.control?"controls all":"controls",children:Object(s.jsx)(l,{text:t.isPlaying?"Stop"+e:"Start"+e,onClick:t.btnHandler,id:"local"})})},j=[{cycle:0,duration:10,id:0,section:"Countdown"},{cycle:1,duration:30,id:1,section:"Ascent"},{cycle:1,duration:20,id:2,section:"Soaring"},{cycle:1,duration:30,id:3,section:"Descent"},{cycle:1,duration:20,id:4,section:"Lament"},{cycle:2,duration:20,id:5,section:"Ascent"},{cycle:2,duration:15,id:6,section:"Soaring"},{cycle:2,duration:20,id:7,section:"Descent"},{cycle:2,duration:15,id:8,section:"Lament"},{cycle:3,duration:10,id:9,section:"Ascent"},{cycle:3,duration:5,id:10,section:"Soaring"},{cycle:3,duration:10,id:11,section:"Descent"},{cycle:3,duration:5,id:12,section:"Lament"},{cycle:4,duration:5,id:13,section:"Ascent"},{cycle:4,duration:2,id:14,section:"Soaring"},{cycle:4,duration:5,id:15,section:"Descent"},{cycle:4,duration:2,id:16,section:"Lament"},{cycle:5,duration:3,id:17,section:"Soaring"},{cycle:5,duration:1,id:18,section:"Descent"},{cycle:6,duration:2,id:19,section:"Ascent"}];var b=function(t){return Object(s.jsx)("div",{className:"progress_container",children:Object(s.jsx)("div",{id:"progress-bar",className:"progress",style:{width:100*t.percent+"%"}})})};var O=function(t){var e,n,c,i,o,r;return Object(s.jsxs)("div",{className:"countdown",children:[Object(s.jsxs)("p",{className:"section_title",children:[null===(e=j[t.curSection])||void 0===e?void 0:e.section,"\xa0",null===(n=j[t.curSection])||void 0===n?void 0:n.cycle,"\xa0 (",null===(c=j[t.curSection])||void 0===c?void 0:c.duration,'")']}),Object(s.jsxs)("p",{className:"timer",children:[Math.trunc(10*t.timer)/10," seconds"]}),Object(s.jsx)(b,{percent:t.percent}),Object(s.jsxs)("p",{className:"section_next",children:["Next: ",null===(i=j[t.curSection+1])||void 0===i?void 0:i.section,"\xa0",null===(o=j[t.curSection+1])||void 0===o?void 0:o.cycle,"\xa0 (",null===(r=j[t.curSection+1])||void 0===r?void 0:r.duration,'")']})]})},v=function(t){var e=j.map((function(e){var n="btn-link ";return t.curSection===e.id&&(n+="current"),t.curSection>e.id&&(n+="completed"),Object(s.jsx)("li",{children:Object(s.jsxs)("button",{className:n,onClick:t.btnHandler,"data-id":e.id,children:[e.section,"\xa0",e.cycle,"\xa0 (",e.duration,'")']})},e.id)}));return Object(s.jsx)("div",{className:"section_list",children:Object(s.jsx)("ol",{children:e})})},f=n(33),x=n.n(f)()("https://pacific-beyond-27860.herokuapp.com/");n(70);var y=function(){var t=Object(c.useState)(!1),e=Object(a.a)(t,2),n=e[0],i=e[1],o=Object(c.useState)(j[0].duration),r=Object(a.a)(o,2),l=r[0],b=r[1],f=Object(c.useState)(0),y=Object(a.a)(f,2),m=y[0],S=y[1],h=Object(c.useState)(0),p=Object(a.a)(h,2),g=p[0],k=p[1],N=Object(c.useState)(new Date),w=Object(a.a)(N,2),D=w[0],C=w[1],H=Object(c.useState)(!1),A=Object(a.a)(H,2),L=A[0],_=A[1],E=Object(c.useState)("Not connected to server."),I=Object(a.a)(E,2),P=I[0],J=I[1];function M(t){b(j[t].duration),S(0),k(t),C(new Date),i(!0)}function T(){b(j[0].duration),S(0),k(0),C(new Date),i(!1)}function B(t){if("checkbox"!==t.target.type){var e=0;if(t.target.classList.contains("btn-link"))return e=+t.target.dataset.id,L?void x.emit("Start",e):void M(e);L?n?x.emit("Stop"):x.emit("Start",e):n?i(!1):M(e)}else _(!L)}function F(){if(!n||g>=j.length)T();else{var t=new Date-D,e=j[g].duration-t/1e3;if(e<=0){k(g+1);var c=D;c.setTime(c.getTime()+1e3*j[g].duration),C(c),e+=j[g].duration}S(t/(1e3*j[g].duration)),b(e)}}return Object(c.useEffect)((function(){x.on("Hello",(function(t){return J(t+" client(s) connected to server :)")})),x.on("Start",(function(t){return M(t)})),x.on("Stop",(function(){return T()}))}),[]),Object(c.useEffect)((function(){var t=setInterval(F,33);return function(){clearInterval(t)}})),Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(O,{isPlaying:n,curSection:g,timer:l,percent:m}),Object(s.jsx)(u,{isPlaying:n,btnHandler:B,control:L}),Object(s.jsx)(v,{btnHandler:B,curSection:g}),Object(s.jsx)(d,{control:L,controlHandler:B,connection:P})]})};r.a.render(Object(s.jsx)(i.a.StrictMode,{children:Object(s.jsx)(y,{})}),document.getElementById("root"))}},[[71,1,2]]]);
//# sourceMappingURL=main.6b0c8820.chunk.js.map